<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="assets/css/styled_bootstrap.css" rel="stylesheet">
    <link href="dist/uwp.css" rel="stylesheet">
    <title>Upload With Preview</title>
    <link rel="icon" type="image/png" href="assets/logo.png" />
  </head>

  <body class="bg-light">

    <div class="container">
        <div class="py-5 text-center mx-auto col-md-10">
            <img class="d-block mx-auto mb-4" src="assets/logo.png" height="72">
            <h2>Upload With Preview</h2>
            <img src="assets/images/animation.gif" />
            <p class="lead">This lib is a easy tool to use in html forms with image fields. With UWP you can use a"img" as a complex input for images (autoload, b64 conversion, value).</p>
          </div>
          <div class="row justify-content-center">
            <div class="col-md-10">
              <form id="form" class="needs-validation">
                <h4 class="mb-3">Installation</h4>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label>Add the following tag to the header of your page</label>
                        <input type="text" readonly class="form-control" id="code1" value='<link rel="stylesheet" href="dist/uwp.css" />'>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label>Add the following tag to the end of your body page</label>
                        <input type="text" readonly class="form-control" id="code2" value='<script src="dist/uwp.js"></script>'>
                    </div>
                </div>
        
                <h4 class="mb-3">Usage</h4>
                <div class="row">
                    <div class="mb-3 col-md-8">
                      <div class="col-md-12">
                        <label>1. For use you need put the attribute "uwp" as name of input that will has base64 content from image after upload file</label>
                        <input type="text" readonly class="form-control" id="code3" value='<img src="assets/images/blank.png" uwp="example1" />'>
                      </div>
                      <div class="col-md-12">
                        <label>2. If you want a required input, just put"required" attribute in "img" element</label>
                        <input type="text" readonly class="form-control" id="code4" value='<img src="assets/images/blank.png" uwp="example2" required />'>
                      </div>
                      <div class="col-md-12">
                        <label>3. If you want the input with a loaded value (full url or base64), just put "value" attribute in"img" element</label>
                        <input type="text" readonly class="form-control" id="code5" value=''>
                      </div>
                      <div class="col-md-12">
                        <label>4. If you want limit file size, just put "maxsize" attribute on image (in KB's)</label>
                        <input type="text" readonly class="form-control" id="code6" value='<img src="assets/images/blank.png" uwp="example4" maxsize="2000">'>
                      </div>
                    </div>
                    <div class="row col-md-4">
                      <div class="col-md-6 text-center">
                        <label for="example1" class="h2 col-md-12">Sample 1</label>
                        <img id="example1" src="assets/images/blank.png" uwp="example1">
                      </div>
                      <div class="col-md-6 text-center">
                        <label for="example2" class="h2 col-md-12">Sample 2</label>
                        <img id="example2" src="assets/images/blank.png" required uwp="example2">
                      </div>
                      <div class="col-md-6 text-center">
                        <label for="example3" class="h2 col-md-12">Sample 3</label>
                        <img id="example3" src="assets/images/blank.png" value="" uwp="example3">
                      </div>
                      <div class="col-md-6 text-center">
                        <label for="example4" class="h2 col-md-12">Sample 4</label>
                        <img id="example4" src="assets/images/blank.png" uwp="example4" maxsize="2000">
                      </div>
                    </div>
                    <div class="col-md-12 text-center">
                      <button class="btn btn-lg btn-success col-md-8">Submit Test</button>
                    </div>
                </div>
                <h4 class="mb-3">Contributing</h4>
                <div class="col-md-12 mb-3">
                    <label>Pull requests are welcome. For major changes, please open an issue first to discuss what you would like to change.</label>
                    <label>Please make sure to update tests as appropriate.</label>
                </div>

                <cite>If this help you or you liked, you can<br></cite>
                <a class="bmc-button" target="_blank" href="https://mpago.la/2UT2nnT"><img src="https://www.buymeacoffee.com/assets/img/BMC-btn-logo.svg" alt="Buy me a coffee">Buy me a coffee</a>
              </form>
            </div>
          </div>

      <footer class="my-5 pt-5 text-muted text-center text-small">
        <p class="mb-1">&copy; 2022 - <a href="http://campostech.com.br/lucascampos" target="_blank">Lucas Campos</a></p>
      </footer>
    </div>

    <!-- Button trigger modal -->
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#requestFormModal">
      Launch demo modal
    </button>
    
    <!-- Modal -->
    <div class="modal col-md-10 fade" id="requestFormModal" tabindex="-1" role="dialog" aria-labelledby="requestFormModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="requestFormModalLabel">Request Result</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body" id="modalBody">
            
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
    
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script>
      if($("#example3").attr("value") == ""){
        let relativeImageURL = `${location.href.substring(0, location.href.lastIndexOf("/"))}/assets/favicon.png`;
        $("#example3").attr("value", relativeImageURL);
      }
      $("#code5").val(`<img src="assets/images/blank.png" uwp="example3" value="${$("#example3").attr("value")}"/>`)
      
      $("input").each(function(){
        $(this).attr("title", "Click to copy code");
        $(this).attr("onClick", `copyToClipboard('${$(this).val()}')`);
      });
      function copyToClipboard(text) {
        var dummy = document.createElement("textarea");
        document.body.appendChild(dummy);
        dummy.value = text;
        dummy.select();
        document.execCommand("copy");
        document.body.removeChild(dummy);
        alert("Code copied to clipboard!");
      }
      </script>
      <script>
      $('#form').submit(function() {
        let result = "";
        for (const input of document.getElementById("form").querySelectorAll('input[name]')) {
          result += `<h3>${input.name}:</h3><br><textarea class="col-md-12" rows="3">${input.value}</textarea>`;  
        }
        $("#modalBody").html(result);
        $("#requestFormModal").modal("show");
        return false; 
      });
      </script>
      <script src="dist/uwp.js"></script>
      <script src="assets/js/bootstrap.js"></script>

  </body>
</html>